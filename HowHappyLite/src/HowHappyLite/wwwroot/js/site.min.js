$(document).on("change",".btn-file :file",function(){var n=$(this),t=n.get(0).files?n.get(0).files.length:1,i=n.val().replace(/\\/g,"/").replace(/.*\//,"");n.trigger("fileselect",[t,i])});$(document).ready(function(){function n(){var r,u,n,f;for(t(),r=new FormData,u=$('input[type="file"]')[0].files,n=0;n<u.length;n++)r.append("file_"+n,u[n]);f=$("form").serializeArray();$.each(f,function(n,t){r.append(t.name,t.value)});$.ajax({type:"POST",url:"/home/Result",contentType:!1,processData:!1,data:r,success:function(n){i(n)},error:function(){alert("There was error uploading files!")}})}function t(){function r(){$("#result").append($("<img>",{id:"photo",src:n.result}));$("#result").css("width",$("#photo").width())}$("#result").html("");var t=document.getElementById("file"),i=t.files[0],n=new FileReader;n.onload=r;n.readAsDataURL(i)}function i(n){var i=JSON.stringify(n),t=JSON.parse(i);$("#resultDetails").html("<span>We found "+t.length+" faces<\/span>");$.each(t,function(n,t){var i=document.createElement("div"),r,u;i.className="rect";i.style.height=t.faceRectangle.height+"px";i.style.width=t.faceRectangle.width+"px";i.style.left=t.faceRectangle.left+"px";i.style.top=t.faceRectangle.top+"px";i.id="rect"+n;r=document.createElement("div");r.className="rank";r.innerHTML="#"+(n+1);i.appendChild(r);$("#result").append(i);u="Happiness: "+Number(t.scores.happiness.toFixed(2))+"<br>Fear: "+Number(t.scores.fear.toFixed(2))+"<br>Anger: "+Number(t.scores.anger.toFixed(2))+"<br>Contempt: "+Number(t.scores.contempt.toFixed(2))+"<br>Disgust: "+Number(t.scores.disgust.toFixed(2))+"<br>Neutral: "+Number(t.scores.neutral.toFixed(2))+"<br>Sadness: "+Number(t.scores.sadness.toFixed(2))+"<br>Surprise: "+Number(t.scores.surprise.toFixed(2));$("#rect"+n).popover({title:"#"+(n+1),content:u,html:"true",trigger:"click"})})}$("#form-file-input").show();$("#form-submit-button").show();$("#intro-text").show();$("#Emotion").hide();$("#upload-button").click(function(){n()});$("#Emotion").change(function(){n()})});